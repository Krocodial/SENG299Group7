
<div class="jumbotron">

<!-- get the logged in user as the user in the controller -->
<div class="page-header" ng-init="user.getUser(main.user.id)">
	
	<h1>Welcome, {{ user.userData.username }} </h1> 
	<p>{{ user.userData.description }}</p>
	<a href="/users/{{ main.user.id }}" class="btn btn-large">Edit your information</a>

	<h3> Account info: </h3>
	<p ng-if="main.user.isAdmin">You <em>are</em> an admin.</p> 	
	<p ng-if="!main.user.isAdmin">You <em>are</em> a vendor.</p> 	
	<p ng-if="user.banned">You are currently banned. Time until ban ends: {{ user.userBanMilli | amDifference : user.currentDateMilli : 'hour' }} hour(s)</span>
</div>

<div class='ReservationTable' ng-if="!main.user.isAdmin"> 
<h3>Your Reservations</h3>

	<table class="table table-bordered table-striped" ng-controller="reservationController as res">
	<thead>
		<tr>
			<th>Booth</th>
			<th>Date start</th>
			<th>Description</th>
			<th>Delete</th>
		</tr>
	</thead>
	<tbody>
		
		<!-- Only show reservations that belong to this user -->
		<tr ng-init="res.getUser(main.user.id)" ng-repeat="booking in res.reservations" ng-if="booking.user_id == main.user.id">

				
				<td>{{ res.getBoothName(booking.booth_id) }}</td>
				<td>{{ booking.dt_start }}</td>
				<td>{{ booking.description }}</td>
				<td class="col-sm-2">
					<a href="#" ng-click="res.deleteUserReservation(booking._id)" class="btn btn-primary">Delete</a>
				</td>

			</div>

		</tr>
	</tbody>
</table>
</div>
</div>
